{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Documents/react-contact-form-n8n-automation/app/api/webhook/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // Parse the incoming form data\r\n    const body = await request.json()\r\n    const { name, email, phone, message } = body\r\n\r\n    // Validate required fields\r\n    if (!name || !email || !message) {\r\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\r\n    }\r\n\r\n    // Example: https://your-instance.n8n.cloud/webhook/webhook-id\r\n    const WEBHOOK_URL = process.env.N8N_WEBHOOK_URL || \"https://nodes-mary.syncjourney.com/webhook-test/contact\"\r\n\r\n    // Prepare the payload to send to n8n\r\n    const payload = {\r\n      name,\r\n      email,\r\n      phone: phone || \"Not provided\",\r\n      message,\r\n      submittedAt: new Date().toISOString(),\r\n    }\r\n\r\n    console.log(\"[v0] Sending form data to n8n webhook:\", payload)\r\n\r\n    // Send the data to the n8n webhook\r\n    const response = await fetch(WEBHOOK_URL, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(payload),\r\n    })\r\n\r\n    if (!response.ok) {\r\n      console.error(\"[v0] n8n webhook error:\", response.statusText)\r\n      throw new Error(`n8n webhook returned status ${response.status}`)\r\n    }\r\n\r\n    console.log(\"[v0] Successfully sent form data to n8n webhook\")\r\n\r\n    return NextResponse.json({ message: \"Form submitted successfully\" }, { status: 200 })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in webhook route:\", error)\r\n\r\n    return NextResponse.json({ error: \"Failed to process form submission\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,+BAA+B;QAC/B,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;QAExC,2BAA2B;QAC3B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;YAC/B,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,8DAA8D;QAC9D,MAAM,cAAc,QAAQ,GAAG,CAAC,eAAe,IAAI;QAEnD,qCAAqC;QACrC,MAAM,UAAU;YACd;YACA;YACA,OAAO,SAAS;YAChB;YACA,aAAa,IAAI,OAAO,WAAW;QACrC;QAEA,QAAQ,GAAG,CAAC,0CAA0C;QAEtD,mCAAmC;QACnC,MAAM,WAAW,MAAM,MAAM,aAAa;YACxC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,2BAA2B,SAAS,UAAU;YAC5D,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,SAAS,MAAM,EAAE;QAClE;QAEA,QAAQ,GAAG,CAAC;QAEZ,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACrF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAE9C,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoC,GAAG;YAAE,QAAQ;QAAI;IACzF;AACF"}}]
}